### **Export All Relationships Without Using `.output`**

If `.output` is causing issues, let's **export all relationships directly from the command line**.

---

## **1ï¸âƒ£ Export Facility â†’ Location Relationships**

```bash
sqlite3 childcare.db -header -csv "SELECT facilities.facility_id, locations.location_id FROM facilities LEFT JOIN locations ON facilities.location_id = locations.location_id;" > facility_location_relationships.csv
```

---

## **2ï¸âƒ£ Export Facility â†’ Owner Relationships**

```bash
sqlite3 childcare.db -header -csv "SELECT facilities.facility_id, owners.owner_id FROM facilities LEFT JOIN owners ON facilities.owner_id = owners.owner_id;" > facility_owner_relationships.csv
```

---

## **3ï¸âƒ£ Export Facility â†’ License Relationships**

```bash
sqlite3 childcare.db -header -csv "SELECT facilities.facility_id, licenses.license_id FROM facilities LEFT JOIN licenses ON facilities.license_id = licenses.license_id;" > facility_license_relationships.csv
```

---

## **4ï¸âƒ£ Export Facility â†’ School District Relationships**

```bash
sqlite3 childcare.db -header -csv "SELECT facilities.facility_id, school_districts.district_id FROM facilities LEFT JOIN school_districts ON facilities.school_district_id = school_districts.district_id;" > facility_school_district_relationships.csv
```

---

## **5ï¸âƒ£ Verify CSV Output**

After running the above commands, check that the CSV files contain **data**:

```bash
ls -lah *.csv
cat facility_location_relationships.csv | head -n 10
cat facility_owner_relationships.csv | head -n 10
cat facility_license_relationships.csv | head -n 10
cat facility_school_district_relationships.csv | head -n 10
```

âœ… **If data is present, move to the Neo4j import directory.**

---

## **6ï¸âƒ£ Move CSV Files to Neo4j's Import Directory**

For **Local Neo4j Installation**:

```bash
mv facility_*_relationships.csv /var/lib/neo4j/import/
```

For **Docker Neo4j**:

```bash
mv facility_*_relationships.csv import/
```

---

## **7ï¸âƒ£ Import Relationships into Neo4j**

Once the CSV files are in Neo4jâ€™s `import/` folder, **run these queries** in **Neo4j Browser (`http://localhost:7474`)**:

### **ğŸ”— Facility â†’ Location**

```cypher
LOAD CSV WITH HEADERS FROM 'file:///facility_location_relationships.csv' AS row
MATCH (f:Facility {facility_id: row.facility_id})
MATCH (l:Location {location_id: row.location_id})
MERGE (f)-[:LOCATED_IN]->(l);
```

---

### **ğŸ”— Facility â†’ Owner**

```cypher
LOAD CSV WITH HEADERS FROM 'file:///facility_owner_relationships.csv' AS row
MATCH (f:Facility {facility_id: row.facility_id})
MATCH (o:Owner {owner_id: row.owner_id})
MERGE (f)-[:OWNED_BY]->(o);
```

---

### **ğŸ”— Facility â†’ License**

```cypher
LOAD CSV WITH HEADERS FROM 'file:///facility_license_relationships.csv' AS row
MATCH (f:Facility {facility_id: row.facility_id})
MATCH (lic:License {license_id: row.license_id})
MERGE (f)-[:HAS_LICENSE]->(lic);
```

---

### **ğŸ”— Facility â†’ School District**

```cypher
LOAD CSV WITH HEADERS FROM 'file:///facility_school_district_relationships.csv' AS row
MATCH (f:Facility {facility_id: row.facility_id})
MATCH (sd:SchoolDistrict {district_id: row.district_id})
MERGE (f)-[:PART_OF_DISTRICT]->(sd);
```

---

## **8ï¸âƒ£ Verify the Relationships in Neo4j**

Run these **test queries** to ensure relationships exist:

### **Check Any Relationships**

```cypher
MATCH ()-[r]->() RETURN COUNT(r);
```

### **Check Facility â†’ Location Links**

```cypher
MATCH (f:Facility)-[:LOCATED_IN]->(l:Location)
RETURN f.name, l.city, l.state, l.zip_code LIMIT 10;
```

### **Check Facility â†’ Owner Links**

```cypher
MATCH (f:Facility)-[:OWNED_BY]->(o:Owner)
RETURN f.name, o.license_number LIMIT 10;
```

### **Check Facility â†’ License Links**

```cypher
MATCH (f:Facility)-[:HAS_LICENSE]->(lic:License)
RETURN f.name, lic.license_number, lic.expiry_date LIMIT 10;
```

### **Check Facility â†’ School District Links**

```cypher
MATCH (f:Facility)-[:PART_OF_DISTRICT]->(sd:SchoolDistrict)
RETURN f.name, sd.name LIMIT 10;
```

---

## **ğŸš€ Summary**

1ï¸âƒ£ **Export all relationships to separate CSV files**.  
2ï¸âƒ£ **Verify data exists using `cat facility_*.csv | head -n 10`**.  
3ï¸âƒ£ **Move CSVs to Neo4j's `import/` folder**.  
4ï¸âƒ£ **Run `LOAD CSV` commands to import relationships**.  
5ï¸âƒ£ **Check if relationships exist using Cypher queries**.

ğŸš€ **Now your Neo4j graph is fully connected!** ğŸ”¥  
Let me know if you hit any issues.